<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Errata: prepping the HSPA, GEPA, and old NJASK layout files â€” almart.in </title>
	<meta name="description" content="">
	<meta name="author" content="Andrew Martin">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="http://almart.in/theme/html5.js"></script>
		<![endif]-->
	<link href="http://almart.in/theme/css/ipython.css" rel="stylesheet">
	<!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet"> -->
	<!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
	<!-- <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet"> -->
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.2/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="http://almart.in/theme/css/local.css" rel="stylesheet">
	<link href="http://almart.in/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<!-- NAVBAR -->
	<nav class="navbar navbar-default" style="margin-top:2em;">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="http://almart.in">almart.in</a>
			</div>			
			<!-- MENUITEMS: update the MENUITEMS dict in pelicanconf.py -->
			<div id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li><a href="http://almart.in/pages/about.html"><i class="fa fa-user "></i> about</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="http://almart.in/categories.html"><i class="fa fa-archive"></i> categories</a></li>
					<li><a href="http://almart.in/tags.html"><i class="fa fa-tags"></i> tags</a></li>
					<li><a href="http://almart.infeeds/all.atom.xml"><i class="fa fa-rss"></i> rss</a></li>
				</ul>
			</div>
		</div>
	</nav>
	
	<!-- MAIN CONTENT: edit in base_site.html template -->
	<div class="row">
		<!-- <div class="col-md-3" style="margin-top:1em;"> -->
		<div class="col-md-3">
			<!-- MEDIAITEMS: update the MEDIAITEMS dict in pelicanconf.py -->
			<ul class="list-group">
				<li class="list-group-item"><a href="https://twitter.com/moneywithwings"><i class="fa fa-twitter"></i>  moneywithwings</a></li>
				<li class="list-group-item"><a href="mailto:almartin at gmail dot com"><i class="fa fa-envelope"></i> almartin at gmail dot com</a></li>
				<li class="list-group-item"><a href="http://github.com/almartin82"><i class="fa fa-github"></i>  almartin82</a></li>
				<li class="list-group-item"><a href="https://www.goodreads.com/user/show/777050-andrew-martin"><i class="fa fa-book"></i> Andrew Martin</a></li>
				<li class="list-group-item"><a href="https://keybase.io/almartin"><i class="fa fa-key"></i>  almartin</a></li>
				<li class="list-group-item"><a href="http://www.linkedin.com/in/martinandrewl"><i class="fa fa-linkedin"></i>  Andrew Martin</a></li>
			</ul>
			<!-- CATEGORIES: auto-generated by pelican -->			
			<ul class="list-group">
				<li class="list-group-item">
					<span class="badge">4</span>
					<a href="http://almart.in/category/education.html">education</a>
				</li>
				<li class="list-group-item">
					<span class="badge">3</span>
					<a href="http://almart.in/category/meta.html">meta</a>
				</li>
			</ul>
		</div>
		<div class="col-md-8">
			<!-- ARTICLE CONTENT: edit in index.html template -->
        
<section id="content" class="body">    
    <!-- PELICAN_END_SUMMARY -->

<p><strong>Attention conservaton notice:</strong> this post is just data munging to get a csv with HSPA metadata shipshape.  Tried to set it to <code>status: hidden</code> so it wouldn't show on the front page of the blog, but had some trouble with Pelican.  That said, work has to get done, so better to do it in an .Rmd and write down what I was thinking - I've learned that lesson like a thousand times.  If you are in the small group of people who care about this sort of thing, <a href="" title="mailto:almartin at gmail dot com">get in touch</a>.</p>
<p>First, read in the csv.  This proved to be kind of a headache:</p>
<p>the format of the HSPA file layout is totally different from the NJASK file (sigh).  The key difference is that the  spanning headers that indicate the subgroup (gen ed, special ed, etc) are indicated as have start/end position across the whole relevant range in the NJASK file, but on the HSPA file they only show up as 6 character fields <em>before</em> the relevant range.  I hand-edited the HSPA file so it would be consistent with the NJASK file.  </p>
<p><strong>NJASK:</strong></p>
<p><img src="../static_images/06a_njask.png"></p>
<p><strong>HSPA:</strong></p>
<p><img src="../static_images/06a_hspa.png"></p>
<p>This.... I can't say anything nice about the decision to do this (<em>why?!?</em>) so I'm just going to move on.  </p>
<div class="highlight"><pre>hspa <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&quot;datasets/hspa_layout.csv&quot;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/hspa_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>hspa<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>hspa<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(hspa)): object &#39;hspa&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>hspa<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(hspa): object &#39;hspa&#39; not found
</pre></div>


<p>Let's rework the code from the first <a href="http://almart.in/reading-nj-assess-data-1.html">post</a> into a proper function.</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>sqldf<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>magrittr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>reshape2<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>process_layout <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>df<span class="p">)</span> <span class="p">{</span>
  <span class="kn">require</span><span class="p">(</span>sqldf<span class="p">)</span>
  <span class="kn">require</span><span class="p">(</span>magrittr<span class="p">)</span>
  <span class="kn">require</span><span class="p">(</span>dplyr<span class="p">)</span>
  <span class="kn">require</span><span class="p">(</span>reshape2<span class="p">)</span>  

  <span class="c1">#split spanners from keepers</span>
  spanners <span class="o">&lt;-</span> dplyr<span class="o">::</span>filter<span class="p">(</span>df<span class="p">,</span> structural<span class="o">==</span><span class="kc">TRUE</span><span class="p">)</span>
  keepers <span class="o">&lt;-</span> dplyr<span class="o">::</span>filter<span class="p">(</span>df<span class="p">,</span> structural<span class="o">==</span><span class="kc">FALSE</span><span class="p">)</span>

  <span class="c1">#join spanners to keepers</span>
  with_spanners <span class="o">&lt;-</span> sqldf<span class="p">(</span><span class="s">&#39;</span>
<span class="s">    SELECT keepers.*</span>
<span class="s">          ,spanners.data_type AS spanner</span>
<span class="s">          ,spanners.field_length AS spanner_length</span>
<span class="s">    FROM keepers</span>
<span class="s">    LEFT OUTER JOIN spanners</span>
<span class="s">      ON keepers.field_start_position &gt;= spanners.field_start_position</span>
<span class="s">     AND keepers.field_end_position &lt;= spanners.field_end_position</span>
<span class="s">  &#39;</span><span class="p">)</span>

  <span class="c1">#tag the joined data frame with a row number to facilitate long -&gt; wide</span>
  with_rn <span class="o">&lt;-</span> with_spanners <span class="o">%&gt;%</span>
    dplyr<span class="o">::</span>group_by<span class="p">(</span>
       field_start_position<span class="p">,</span> field_end_position<span class="p">,</span> field_length<span class="p">,</span> 
       data_type<span class="p">,</span> description<span class="p">,</span> comments<span class="p">,</span> valid_values  
    <span class="p">)</span> <span class="o">%&gt;%</span>
    mutate<span class="p">(</span>
      rn <span class="o">=</span> <span class="kp">order</span><span class="p">(</span>desc<span class="p">(</span>spanner_length<span class="p">))</span> 
    <span class="p">)</span> <span class="o">%&gt;%</span>
    select<span class="p">(</span>
      field_start_position<span class="p">,</span> field_end_position<span class="p">,</span> field_length<span class="p">,</span> 
      data_type<span class="p">,</span> description<span class="p">,</span> comments<span class="p">,</span> valid_values<span class="p">,</span> spanner<span class="p">,</span> rn
    <span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="kp">as.data.frame</span><span class="p">()</span>

  <span class="c1">#text processing and mask NAs</span>
  with_rn<span class="o">$</span>rn <span class="o">&lt;-</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&#39;spanner&#39;</span><span class="p">,</span> with_rn<span class="o">$</span>rn<span class="p">)</span>
  with_rn<span class="o">$</span>spanner <span class="o">&lt;-</span> <span class="kp">ifelse</span><span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>with_rn<span class="o">$</span>spanner<span class="p">),</span><span class="s">&#39;&#39;</span><span class="p">,</span> with_rn<span class="o">$</span>spanner<span class="p">)</span>

  layout_wide <span class="o">&lt;-</span> dcast<span class="p">(</span>
    data <span class="o">=</span> with_rn<span class="p">,</span>
    formula <span class="o">=</span> field_start_position <span class="o">+</span> field_end_position <span class="o">+</span> field_length <span class="o">+</span>
      data_type <span class="o">+</span> description <span class="o">+</span> comments <span class="o">+</span> valid_values <span class="o">~</span> rn<span class="p">,</span>
    value.var <span class="o">=</span> <span class="s">&quot;spanner&quot;</span>
  <span class="p">)</span>

  <span class="c1">#this appears to be a bug in dcast?  should not be needed.</span>
  layout_wide<span class="o">$</span>spanner2 <span class="o">&lt;-</span> <span class="kp">ifelse</span><span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>layout_wide<span class="o">$</span>spanner2<span class="p">),</span><span class="s">&#39;&#39;</span><span class="p">,</span> layout_wide<span class="o">$</span>spanner2<span class="p">)</span>

  reserved_chars <span class="o">&lt;-</span> <span class="kt">list</span><span class="p">(</span><span class="s">&#39;+&#39;</span> <span class="o">=</span> <span class="s">&#39;and&#39;</span><span class="p">,</span> <span class="s">&#39;(&#39;</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;)&#39;</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
  <span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="kp">length</span><span class="p">(</span>reserved_chars<span class="p">))</span> <span class="p">{</span>
    layout_wide<span class="o">$</span>spanner1 <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span>
      <span class="kp">names</span><span class="p">(</span>reserved_chars<span class="p">)[</span>i<span class="p">],</span> 
      reserved_chars<span class="p">[</span>i<span class="p">],</span> 
      layout_wide<span class="o">$</span>spanner1<span class="p">,</span> 
      fixed <span class="o">=</span> <span class="kc">TRUE</span>
    <span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">#make final name</span>
  layout_wide<span class="o">$</span>final_name <span class="o">&lt;-</span> layout_wide <span class="o">%$%</span> <span class="kp">paste</span><span class="p">(</span>spanner1<span class="p">,</span> spanner2<span class="p">,</span> description<span class="p">,</span> sep<span class="o">=</span><span class="s">&#39;_&#39;</span><span class="p">)</span>

  <span class="c1">#kill double underscores</span>
  layout_wide<span class="o">$</span>final_name <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> layout_wide<span class="o">$</span>final_name<span class="p">)</span>
  <span class="c1">#kill leading or trailer underscores</span>
  layout_wide<span class="o">$</span>final_name <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&quot;(^_+|_+$)&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> layout_wide<span class="o">$</span>final_name<span class="p">)</span>
  <span class="c1">#trim any remaining whitespace</span>
  layout_wide<span class="o">$</span>final_name <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&quot;^\\s+|\\s+$&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> layout_wide<span class="o">$</span>final_name<span class="p">)</span>
  <span class="c1">#all whitespace becomes underscore</span>
  layout_wide<span class="o">$</span>final_name <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> layout_wide<span class="o">$</span>final_name<span class="p">)</span>

  <span class="c1">#more whitespace cleanup</span>
  layout_wide<span class="o">$</span>comments <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&quot;^\\s+|\\s+$&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> layout_wide<span class="o">$</span>comments<span class="p">)</span>
  layout_wide<span class="o">$</span>description <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&quot;^\\s+|\\s+$&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> layout_wide<span class="o">$</span>description<span class="p">)</span>
  layout_wide<span class="o">$</span>valid_values <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&quot;^\\s+|\\s+$&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> layout_wide<span class="o">$</span>valid_values<span class="p">)</span>

  <span class="kr">return</span><span class="p">(</span>layout_wide<span class="p">)</span>
<span class="p">}</span>

layout_hspa <span class="o">&lt;-</span> process_layout<span class="p">(</span>hspa<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;hspa&#39; not found
</pre></div>


<div class="highlight"><pre>layout_hspa <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span>                                              <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>    <span class="nt">RECORD</span> <span class="nt">KEY</span>                                                      
<span class="err">##</span> <span class="nt">2</span>      <span class="nt">CDS</span> <span class="nt">Code</span>                                                      
<span class="err">##</span> <span class="nt">3</span>   <span class="nt">County</span> <span class="nt">Code</span>                                                      
<span class="err">##</span> <span class="nt">4</span> <span class="nt">District</span> <span class="nt">Code</span> <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">School</span> <span class="nt">Code</span>              <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">school</span> <span class="nt">aggregations</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">6</span>   <span class="nt">County</span> <span class="nt">Name</span>                                                      
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span>                                                                                                                                                                                                         
<span class="err">##</span> <span class="nt">2</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                       <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                                                      <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span><span class="o">,</span> <span class="nt">blank</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                                                                        <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span><span class="o">,</span> <span class="nt">blank</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                      <span class="nt">RECORD_KEY</span>
<span class="err">##</span> <span class="nt">2</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">3</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">4</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">6</span>                     <span class="nt">County_Name</span>
</pre></div>


<p>Finally, save the hspa layout as an .rda file.</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_hspa<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span><span class="s">&#39;datasets/hspa_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## hspa_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>old HSPA</h1>
<p>Before 2010 the HSPA used a different layout.  Prep that layout file:</p>
<p>Read:</p>
<div class="highlight"><pre>hspa2010 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&quot;datasets/hspa2010_layout.csv&quot;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/hspa2010_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>hspa2010<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>hspa2010<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(hspa2010)): object &#39;hspa2010&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>hspa2010<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(hspa2010): object &#39;hspa2010&#39; not found
</pre></div>


<p>One note here: the layout at flat file has headers for science, even though it isn't on the HSPA.  I'm omitting the last set of science headers in my layout file, because the raw files on the state website don't appear to be padded with enough blanks for the last NA slots.  </p>
<p>Process:</p>
<div class="highlight"><pre>layout_hspa2010 <span class="o">&lt;-</span> process_layout<span class="p">(</span>hspa2010<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;hspa2010&#39; not found
</pre></div>


<div class="highlight"><pre>layout_hspa2010 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span>                                              <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>    <span class="nt">RECORD</span> <span class="nt">KEY</span>                                                      
<span class="err">##</span> <span class="nt">2</span>      <span class="nt">CDS</span> <span class="nt">Code</span>                                                      
<span class="err">##</span> <span class="nt">3</span>   <span class="nt">County</span> <span class="nt">Code</span>                                                      
<span class="err">##</span> <span class="nt">4</span> <span class="nt">District</span> <span class="nt">Code</span> <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">School</span> <span class="nt">Code</span>              <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">school</span> <span class="nt">aggregations</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">6</span>   <span class="nt">County</span> <span class="nt">Name</span>                                                      
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span>                                                                                                                                                                                                         
<span class="err">##</span> <span class="nt">2</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                       <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                                                      <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span><span class="o">,</span> <span class="nt">blank</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                                                                        <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span><span class="o">,</span> <span class="nt">blank</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                      <span class="nt">RECORD_KEY</span>
<span class="err">##</span> <span class="nt">2</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">3</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">4</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">6</span>                     <span class="nt">County_Name</span>
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_hspa2010<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/hspa2010_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## hspa2010_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>GEPA</h1>
<p>Now do the same for the GEPA layout, using the functions developed above:</p>
<p>Read:</p>
<div class="highlight"><pre>gepa <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/gepa_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/gepa_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>gepa<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>gepa<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(gepa)): object &#39;gepa&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>gepa<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(gepa): object &#39;gepa&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_gepa <span class="o">&lt;-</span> process_layout<span class="p">(</span>gepa<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;gepa&#39; not found
</pre></div>


<div class="highlight"><pre>layout_gepa <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">60</span>                <span class="nt">109</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span> <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>      <span class="nt">CDS</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">2</span>   <span class="nt">County</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">3</span> <span class="nt">District</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">4</span>   <span class="nt">School</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">County</span> <span class="nt">Name</span>         
<span class="err">##</span> <span class="nt">6</span> <span class="nt">District</span> <span class="nt">Name</span>         
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">2</span>                                                                        <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">80</span><span class="o">,</span> <span class="nt">ST</span><span class="o">,</span> <span class="nt">A</span><span class="o">,</span> <span class="nt">B</span><span class="o">,</span> <span class="nt">CD</span><span class="o">,</span> <span class="nt">DE</span><span class="o">,</span> <span class="nt">FG</span><span class="o">,</span> <span class="nt">GH</span><span class="o">,</span> <span class="nt">I</span><span class="o">,</span> <span class="nt">J</span><span class="o">,</span> <span class="nt">R</span><span class="o">,</span> <span class="nt">NS</span><span class="o">,</span> <span class="nt">SN</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                                                      <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                     <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">2</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">3</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">4</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">County_Name</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">District_Name</span>
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_gepa<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/gepa_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## gepa_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>old NJASK</h1>
<p>repeat for old NJASK</p>
<p>Read:</p>
<div class="highlight"><pre>njask05 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask2005_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/njask2005_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>njask05<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>njask05<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(njask05)): object &#39;njask05&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>njask05<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(njask05): object &#39;njask05&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_njask05 <span class="o">&lt;-</span> process_layout<span class="p">(</span>njask05<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;njask05&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask05 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">60</span>                <span class="nt">109</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span> <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>      <span class="nt">CDS</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">2</span>   <span class="nt">County</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">3</span> <span class="nt">District</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">4</span>   <span class="nt">School</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">County</span> <span class="nt">Name</span>         
<span class="err">##</span> <span class="nt">6</span> <span class="nt">District</span> <span class="nt">Name</span>         
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">2</span>                                                                                                   <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span><span class="o">,</span> <span class="nt">90</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                                                                                                             <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                                                               <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">2</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">3</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">4</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">County_Name</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">District_Name</span>
</pre></div>


<div class="highlight"><pre>layout_njask05 <span class="o">%&gt;%</span> <span class="kp">tail</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>##     field_start_position field_end_position field_length data_type
## 430                 2283               2288            6   Integer
## 431                 2289               2292            4   Decimal
## 432                 2293               2296            4   Decimal
## 433                 2297               2300            4   Decimal
## 434                 2301               2304            4   Decimal
## 435                 2305               2306            2   Integer
##                         description                  comments
## 430    Number of Valid Scale Scores                          
## 431 Partially Proficient Percentage       One implied decimal
## 432           Proficient Percentage       One implied decimal
## 433  Advanced Proficient Percentage       One implied decimal
## 434                Scale Score Mean       One implied decimal
## 435                           Grade Located in text file only
##       valid_values spanner1                       spanner2
## 430   0 or greater  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 431   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 432   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 433   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 434 100.0 to 300.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 435         03, 04                                        
##                                                                 final_name
## 430    SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Number_of_Valid_Scale_Scores
## 431 SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Partially_Proficient_Percentage
## 432           SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Proficient_Percentage
## 433  SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Advanced_Proficient_Percentage
## 434                SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Scale_Score_Mean
## 435                                                                  Grade
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_njask05<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask05_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## njask05_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>(2004) old NJASK</h1>
<p>once more for 2004 NJASK</p>
<p>Read:</p>
<div class="highlight"><pre>njask04 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask2004_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/njask2004_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>njask04<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>njask04<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(njask04)): object &#39;njask04&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>njask04<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(njask04): object &#39;njask04&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_njask04 <span class="o">&lt;-</span> process_layout<span class="p">(</span>njask04<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;njask04&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask04 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">60</span>                <span class="nt">109</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span> <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>      <span class="nt">CDS</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">2</span>   <span class="nt">County</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">3</span> <span class="nt">District</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">4</span>   <span class="nt">School</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">County</span> <span class="nt">Name</span>         
<span class="err">##</span> <span class="nt">6</span> <span class="nt">District</span> <span class="nt">Name</span>         
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">2</span>                                                                                                   <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span><span class="o">,</span> <span class="nt">90</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                                                                                                             <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                                                               <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">2</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">3</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">4</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">County_Name</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">District_Name</span>
</pre></div>


<div class="highlight"><pre>layout_njask04 <span class="o">%&gt;%</span> <span class="kp">tail</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>##     field_start_position field_end_position field_length data_type
## 357                 1869               1874            6   Integer
## 358                 1875               1878            4   Decimal
## 359                 1879               1882            4   Decimal
## 360                 1883               1886            4   Decimal
## 361                 1887               1890            4   Decimal
## 362                 1891               1892            2   Integer
##                         description                  comments
## 357    Number of Valid Scale Scores                          
## 358 Partially Proficient Percentage       One implied decimal
## 359           Proficient Percentage       One implied decimal
## 360  Advanced Proficient Percentage       One implied decimal
## 361                Scale Score Mean       One implied decimal
## 362                           Grade Located in text file only
##       valid_values spanner1                       spanner2
## 357   0 or greater  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 358   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 359   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 360   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 361 100.0 to 300.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 362         03, 04                                        
##                                                                 final_name
## 357    SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Number_of_Valid_Scale_Scores
## 358 SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Partially_Proficient_Percentage
## 359           SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Proficient_Percentage
## 360  SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Advanced_Proficient_Percentage
## 361                SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Scale_Score_Mean
## 362                                                                  Grade
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_njask04<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask04_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## njask04_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>2007 gr 3 NJASK</h1>
<p>this one used a slightly different layout.</p>
<p>Read:</p>
<div class="highlight"><pre>njask07gr3 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask2007gr3_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/njask2007gr3_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>njask07gr3<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>njask07gr3<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(njask07gr3)): object &#39;njask07gr3&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>njask07gr3<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(njask07gr3): object &#39;njask07gr3&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_njask07gr3 <span class="o">&lt;-</span> process_layout<span class="p">(</span>njask07gr3<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;njask07gr3&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask07gr3 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">60</span>                <span class="nt">109</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span> <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>      <span class="nt">CDS</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">2</span>   <span class="nt">County</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">3</span> <span class="nt">District</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">4</span>   <span class="nt">School</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">County</span> <span class="nt">Name</span>         
<span class="err">##</span> <span class="nt">6</span> <span class="nt">District</span> <span class="nt">Name</span>         
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">2</span>                                                                                                   <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span><span class="o">,</span> <span class="nt">90</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                                                      <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                      <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span><span class="o">;</span> <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">2</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">3</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">4</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">County_Name</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">District_Name</span>
</pre></div>


<div class="highlight"><pre>layout_njask07gr3 <span class="o">%&gt;%</span> <span class="kp">tail</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>##     field_start_position field_end_position field_length data_type
## 481                 2541               2544            4   Decimal
## 482                 2545               2548            4   Decimal
## 483                 2549               2552            4   Decimal
## 484                 2553               2556            4   Decimal
## 485                 2557               2558            2   Integer
## 486                 2559               2562            4   Integer
##                         description                  comments
## 481 Partially Proficient Percentage       One implied decimal
## 482           Proficient Percentage       One implied decimal
## 483  Advanced Proficient Percentage       One implied decimal
## 484                Scale Score Mean       One implied decimal
## 485                     Grade Level Located in text file only
## 486                       Test Year                          
##                                                                                                                                                                         valid_values
## 481   0.0 to 100.0 for spreadsheet and 0000 to 1000 for text file.  Blank if Number Enrolled = 0 or if Number of Valid Scales Scores = 0 for both unsuppressed and suppressed files.
## 482   0.0 to 100.0 for spreadsheet and 0000 to 1000 for text file.  Blank if Number Enrolled = 0 or if Number of Valid Scales Scores = 0 for both unsuppressed and suppressed files.
## 483   0.0 to 100.0 for spreadsheet and 0000 to 1000 for text file.  Blank if Number Enrolled = 0 or if Number of Valid Scales Scores = 0 for both unsuppressed and suppressed files.
## 484 100.0 to 300.0 for spreadsheet and 1000 to 3000 for text file.  Blank if Number Enrolled = 0 or if Number of Valid Scales Scores = 0 for both unsuppressed and suppressed files.
## 485                                                                                                                                                                           03, 04
## 486                                                                                                                                                                             2007
##                           spanner1 spanner2
## 481 NON-ECONOMICALLY DISADVANTAGED  SCIENCE
## 482 NON-ECONOMICALLY DISADVANTAGED  SCIENCE
## 483 NON-ECONOMICALLY DISADVANTAGED  SCIENCE
## 484 NON-ECONOMICALLY DISADVANTAGED  SCIENCE
## 485                                        
## 486                                        
##                                                                 final_name
## 481 NON-ECONOMICALLY_DISADVANTAGED_SCIENCE_Partially_Proficient_Percentage
## 482           NON-ECONOMICALLY_DISADVANTAGED_SCIENCE_Proficient_Percentage
## 483  NON-ECONOMICALLY_DISADVANTAGED_SCIENCE_Advanced_Proficient_Percentage
## 484                NON-ECONOMICALLY_DISADVANTAGED_SCIENCE_Scale_Score_Mean
## 485                                                            Grade_Level
## 486                                                              Test_Year
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_njask07gr3<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask07gr3_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## njask07gr3_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>2006 gr 3 NJASK</h1>
<p>sooooo many little changes to these layouts.</p>
<p>Read:</p>
<div class="highlight"><pre>njask06gr3 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask2006gr3_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/njask2006gr3_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>njask06gr3<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>njask06gr3<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(njask06gr3)): object &#39;njask06gr3&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>njask06gr3<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(njask06gr3): object &#39;njask06gr3&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_njask06gr3 <span class="o">&lt;-</span> process_layout<span class="p">(</span>njask06gr3<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;njask06gr3&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask06gr3 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">60</span>                <span class="nt">109</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span> <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>      <span class="nt">CDS</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">2</span>   <span class="nt">County</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">3</span> <span class="nt">District</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">4</span>   <span class="nt">School</span> <span class="nt">Code</span>         
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">County</span> <span class="nt">Name</span>         
<span class="err">##</span> <span class="nt">6</span> <span class="nt">District</span> <span class="nt">Name</span>         
<span class="err">##</span>                                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span><span class="o">:</span> <span class="nt">NS</span> <span class="o">=</span> <span class="nt">Non-Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">SN</span> <span class="o">=</span> <span class="nt">Special</span> <span class="nt">Needs</span><span class="o">;</span> <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">2</span>                                                                                                   <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span><span class="o">,</span> <span class="nt">90</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                                                                                                                             <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                                                               <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">2</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">3</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">4</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">County_Name</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">District_Name</span>
</pre></div>


<div class="highlight"><pre>layout_njask06gr3 <span class="o">%&gt;%</span> <span class="kp">tail</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>##     field_start_position field_end_position field_length data_type
## 455                 2409               2414            6   Integer
## 456                 2415               2418            4   Decimal
## 457                 2419               2422            4   Decimal
## 458                 2423               2426            4   Decimal
## 459                 2427               2430            4   Decimal
## 460                 2431               2432            2   Integer
##                         description                  comments
## 455    Number of Valid Scale Scores                          
## 456 Partially Proficient Percentage       One implied decimal
## 457           Proficient Percentage       One implied decimal
## 458  Advanced Proficient Percentage       One implied decimal
## 459                Scale Score Mean       One implied decimal
## 460                           Grade Located in text file only
##       valid_values spanner1                       spanner2
## 455   0 or greater  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 456   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 457   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 458   0.0 to 100.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 459 100.0 to 300.0  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 460         03, 04                                        
##                                                                 final_name
## 455    SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Number_of_Valid_Scale_Scores
## 456 SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Partially_Proficient_Percentage
## 457           SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Proficient_Percentage
## 458  SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Advanced_Proficient_Percentage
## 459                SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Scale_Score_Mean
## 460                                                                  Grade
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_njask06gr3<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask06gr3_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## njask06gr3_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>2006 gr 5 NJASK</h1>
<p>sigh.</p>
<p>Read:</p>
<div class="highlight"><pre>njask06gr5 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask2006gr5_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/njask2006gr5_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>njask06gr5<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>njask06gr5<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(njask06gr5)): object &#39;njask06gr5&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>njask06gr5<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(njask06gr5): object &#39;njask06gr5&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_njask06gr5 <span class="o">&lt;-</span> process_layout<span class="p">(</span>njask06gr5<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;njask06gr5&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask06gr5 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span class="err">##</span>   <span class="nt">field_start_position</span> <span class="nt">field_end_position</span> <span class="nt">field_length</span> <span class="nt">data_type</span>
<span class="err">##</span> <span class="nt">1</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">2</span>                    <span class="nt">1</span>                  <span class="nt">9</span>            <span class="nt">9</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">3</span>                    <span class="nt">1</span>                  <span class="nt">2</span>            <span class="nt">2</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">4</span>                    <span class="nt">3</span>                  <span class="nt">6</span>            <span class="nt">4</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">5</span>                    <span class="nt">7</span>                  <span class="nt">9</span>            <span class="nt">3</span>      <span class="nt">Text</span>
<span class="err">##</span> <span class="nt">6</span>                   <span class="nt">10</span>                 <span class="nt">59</span>           <span class="nt">50</span>      <span class="nt">Text</span>
<span class="err">##</span>     <span class="nt">description</span>                                              <span class="nt">comments</span>
<span class="err">##</span> <span class="nt">1</span>    <span class="nt">RECORD</span> <span class="nt">KEY</span>                                                      
<span class="err">##</span> <span class="nt">2</span>      <span class="nt">CDS</span> <span class="nt">Code</span>                                                      
<span class="err">##</span> <span class="nt">3</span>   <span class="nt">County</span> <span class="nt">Code</span>                                                      
<span class="err">##</span> <span class="nt">4</span> <span class="nt">District</span> <span class="nt">Code</span> <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">5</span>   <span class="nt">School</span> <span class="nt">Code</span>              <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">school</span> <span class="nt">aggregations</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">6</span>   <span class="nt">County</span> <span class="nt">Name</span>                                                      
<span class="err">##</span>                                                                                                                                                                               <span class="nt">valid_values</span>
<span class="err">##</span> <span class="nt">1</span>                                                                                                                                                                                         
<span class="err">##</span> <span class="nt">2</span> <span class="nt">CDS</span> <span class="nt">codes</span> <span class="nt">for</span> <span class="nt">schools</span> <span class="nt">and</span> <span class="nt">districts</span><span class="err">\</span><span class="nt">nTHE</span> <span class="nt">FIRST</span> <span class="nt">TWO</span> <span class="nt">POSITIONS</span> <span class="nt">WILL</span> <span class="nt">INCLUDE</span> <span class="nt">THE</span> <span class="nt">FOLLOWING</span> <span class="nt">AGGREGATION</span> <span class="nt">CODES</span> <span class="nt">IN</span> <span class="nt">LIEU</span> <span class="nt">OF</span> <span class="nt">THE</span> <span class="nt">COUNTY</span> <span class="nt">CODE</span><span class="o">:</span>  <span class="nt">ST</span> <span class="o">=</span> <span class="nt">State</span><span class="o">;</span> <span class="nt">A</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">A</span><span class="o">;</span> <span class="nt">B</span> <span class="o">=</span> <span class="nt">DFG</span> <span class="nt">B</span><span class="o">;</span> <span class="nt">CD</span><span class="o">=</span> <span class="nt">DFG</span> <span class="nt">CD</span><span class="err">\</span><span class="nt">x85</span><span class="o">.</span>
<span class="err">##</span> <span class="nt">3</span>                                                                                   <span class="nt">01</span><span class="o">,</span> <span class="nt">03</span><span class="o">,</span> <span class="nt">05</span><span class="o">,</span> <span class="nt">07</span><span class="o">,</span> <span class="nt">09</span><span class="o">,</span> <span class="nt">11</span><span class="o">,</span> <span class="nt">13</span><span class="o">,</span> <span class="nt">15</span><span class="o">,</span> <span class="nt">17</span><span class="o">,</span> <span class="nt">19</span><span class="o">,</span> <span class="nt">21</span><span class="o">,</span> <span class="nt">23</span><span class="o">,</span> <span class="nt">25</span><span class="o">,</span> <span class="nt">27</span><span class="o">,</span> <span class="nt">29</span><span class="o">,</span> <span class="nt">31</span><span class="o">,</span> <span class="nt">33</span><span class="o">,</span> <span class="nt">35</span><span class="o">,</span> <span class="nt">37</span><span class="o">,</span> <span class="nt">39</span><span class="o">,</span> <span class="nt">41</span><span class="o">,</span> <span class="nt">43</span><span class="o">,</span> <span class="nt">45</span><span class="o">,</span> <span class="nt">47</span><span class="o">,</span> <span class="nt">80</span><span class="o">,</span> <span class="nt">90</span>
<span class="err">##</span> <span class="nt">4</span>                                                                                                                                                                      <span class="nt">0100</span> <span class="nt">to</span> <span class="nt">9999</span><span class="o">,</span> <span class="nt">blank</span>
<span class="err">##</span> <span class="nt">5</span>                                                                                                                                                                        <span class="nt">001</span> <span class="nt">to</span> <span class="nt">999</span><span class="o">,</span> <span class="nt">blank</span>
<span class="err">##</span> <span class="nt">6</span>                                                                                                                     <span class="nt">A</span> <span class="nt">to</span> <span class="nt">Z</span><span class="o">,</span> <span class="nt">blank</span><span class="o">;</span>  <span class="nt">Applicable</span> <span class="nt">only</span> <span class="nt">for</span> <span class="nt">district</span> <span class="nt">and</span> <span class="nt">school</span> <span class="nt">aggregations</span>
<span class="err">##</span>   <span class="nt">spanner1</span> <span class="nt">spanner2</span>    <span class="nt">final_name</span>
<span class="err">##</span> <span class="nt">1</span>                      <span class="nt">RECORD_KEY</span>
<span class="err">##</span> <span class="nt">2</span>                        <span class="nt">CDS_Code</span>
<span class="err">##</span> <span class="nt">3</span>                     <span class="nt">County_Code</span>
<span class="err">##</span> <span class="nt">4</span>                   <span class="nt">District_Code</span>
<span class="err">##</span> <span class="nt">5</span>                     <span class="nt">School_Code</span>
<span class="err">##</span> <span class="nt">6</span>                     <span class="nt">County_Name</span>
</pre></div>


<div class="highlight"><pre>layout_njask06gr5 <span class="o">%&gt;%</span> <span class="kp">tail</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>##     field_start_position field_end_position field_length data_type
## 458                 2403               2408            6   Integer
## 459                 2409               2414            6   Integer
## 460                 2415               2418            4   Decimal
## 461                 2419               2422            4   Decimal
## 462                 2423               2426            4   Decimal
## 463                 2427               2430            4   Decimal
##                         description            comments valid_values
## 458                 Number of Voids                            Blank
## 459    Number of Valid Scale Scores                            Blank
## 460 Partially Proficient Percentage One implied decimal        Blank
## 461           Proficient Percentage One implied decimal        Blank
## 462  Advanced Proficient Percentage One implied decimal        Blank
## 463                Scale Score Mean One implied decimal        Blank
##     spanner1                       spanner2
## 458  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 459  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 460  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 461  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 462  SCIENCE NON-ECONOMICALLY DISADVANTAGED
## 463  SCIENCE NON-ECONOMICALLY DISADVANTAGED
##                                                                 final_name
## 458                 SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Number_of_Voids
## 459    SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Number_of_Valid_Scale_Scores
## 460 SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Partially_Proficient_Percentage
## 461           SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Proficient_Percentage
## 462  SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Advanced_Proficient_Percentage
## 463                SCIENCE_NON-ECONOMICALLY_DISADVANTAGED_Scale_Score_Mean
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_njask06gr5<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask06gr5_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Warning in gzfile(file, &quot;wb&quot;): cannot open compressed file &#39;datasets/
## njask06gr5_layout.rda&#39;, probable reason &#39;No such file or directory&#39;
</pre></div>


<div class="highlight"><pre>## Error in gzfile(file, &quot;wb&quot;): cannot open the connection
</pre></div>


<h1>2009 NJASK</h1>
<p>Read:</p>
<div class="highlight"><pre>njask09 <span class="o">&lt;-</span> readr<span class="o">::</span>read_csv<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask2009_layout.csv&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error: &#39;datasets/njask2009_layout.csv&#39; does not exist in current working directory (&#39;/Users/almartin/Google Drive/repositories/almart.in-source/content/pages&#39;).
</pre></div>


<div class="highlight"><pre><span class="kp">names</span><span class="p">(</span>njask09<span class="p">)</span> <span class="o">&lt;-</span> <span class="kp">tolower</span><span class="p">(</span><span class="kp">gsub</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="kp">names</span><span class="p">(</span>njask09<span class="p">)))</span>
</pre></div>


<div class="highlight"><pre>## Error in gsub(&quot; &quot;, &quot;_&quot;, names(njask09)): object &#39;njask09&#39; not found
</pre></div>


<div class="highlight"><pre><span class="kp">head</span><span class="p">(</span>njask09<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in head(njask09): object &#39;njask09&#39; not found
</pre></div>


<p>Process:</p>
<div class="highlight"><pre>layout_njask09 <span class="o">&lt;-</span> process_layout<span class="p">(</span>njask09<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in filter_(.data, .dots = lazyeval::lazy_dots(...)): object &#39;njask09&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask09 <span class="o">%&gt;%</span> <span class="kp">head</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>## Error in eval(expr, envir, enclos): object &#39;layout_njask09&#39; not found
</pre></div>


<div class="highlight"><pre>layout_njask09 <span class="o">%&gt;%</span> <span class="kp">tail</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre>## Error in eval(expr, envir, enclos): object &#39;layout_njask09&#39; not found
</pre></div>


<p>Save:</p>
<div class="highlight"><pre><span class="kp">save</span><span class="p">(</span>layout_njask09<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>final_path<span class="p">,</span> <span class="s">&#39;datasets/njask09_layout.rda&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error in save(layout_njask09, file = paste0(final_path, &quot;datasets/njask09_layout.rda&quot;)): object &#39;layout_njask09&#39; not found
</pre></div>
</section>
		</div>
	</div>
</div>

<!-- FOOTER -->
<div class="container">
	<div class="row">
		<div class="col-md-11 text-center center-block aw-bottom">
			<p>almart.in is built with <a href="http://docs.getpelican.com/en/3.5.0/#">pelican</a></p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61809650-1', 'auto');
  ga('send', 'pageview');

</script>

 
</body>
</html>