<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>almart.in</title><link>http://almart.in/</link><description></description><atom:link href="http://almart.in/feeds%5Candrew-martin.rss.xml" rel="self"></atom:link><lastBuildDate>Fri, 10 Apr 2015 00:00:00 -0400</lastBuildDate><item><title>Pelican and R markdown: an update</title><link>http://almart.in/pelican-with-rmd.html</link><description>&lt;p&gt;&lt;a href="https://rjweiss.github.io/"&gt;Rebecca Weiss&lt;/a&gt; asked the great question &lt;a href="https://rjweiss.github.io/articles/2014_08_25/testing-rmarkdown-integration/"&gt;&lt;em&gt;"How easy is it to use R markdown and knitr with pelican?"&lt;/em&gt;&lt;/a&gt; in summer of 2014.  Having (successfully!) gotten up and running with the same stack, I thought I would offer some additional thoughts.&lt;/p&gt;
&lt;p&gt;If you're landing here from google, a quick overview &amp;amp; definition of some terms:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://docs.getpelican.com/en/3.5.0/"&gt;Pelican&lt;/a&gt; is a static site generator written in Python.  If you've ever seen the &lt;a href="http://jekyllrb.com/docs/github-pages/"&gt;github pages&lt;/a&gt; tutorials that use Jekyll, Pelican is a great alternative if you want to stay in the Python universe.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://yihui.name/knitr/demo/minimal/"&gt;knitr&lt;/a&gt; is a report generation package for R (especially &lt;a href="http://www.rstudio.com/"&gt;R Studio&lt;/a&gt;) that makes it easy to mix words, simple formatting and R code.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It would be great to be able to write up an .Rmd, run &lt;code&gt;pelican content&lt;/code&gt;, and have everything just show up on the web, with syntax highlighting, inline images, etc.  That's what Pelican + knitr lets us do!&lt;/p&gt;
&lt;h1&gt;behind the scenes&lt;/h1&gt;
&lt;p&gt;A few quick words about what is happening - the &lt;code&gt;rmd_reader&lt;/code&gt; plugin depends on the python &lt;a href="http://rpy.sourceforge.net/rpy2/doc-2.1/html/"&gt;&lt;code&gt;rpy2&lt;/code&gt;&lt;/a&gt; package, which exposes an interface from Python into R.  &lt;code&gt;rpy2&lt;/code&gt; turns the .Rmd into an &lt;a href="http://tex.stackexchange.com/questions/47943/how-to-use-the-aux-file"&gt;.aux file&lt;/a&gt; &lt;em&gt;(things get a little hand-wavy for me here - I am team html/markdown/mathjax)&lt;/em&gt; and then calls &lt;code&gt;knit()&lt;/code&gt; in R to generate a markdown file.&lt;/p&gt;
&lt;h1&gt;general thoughts&lt;/h1&gt;
&lt;p&gt;1) Pelican does not like the way RStudio sets up the document &lt;a href="http://rmarkdown.rstudio.com/developer_document_templates.html"&gt;skeleton&lt;/a&gt;.  Specifically, the &lt;code&gt;---&lt;/code&gt; characters used to gate the yaml-like metadata from the content appear to be a no-no.  As far as I can tell, this isn't in the docs for rmd_reader - you just kind of figure it out by trial and error.  You'll know that this is your issue if you are seeing errors like &lt;code&gt;ERROR: Skipping .\sample-rmd.Rmd: could not find information about 'title'&lt;/code&gt;.  Look at my example in #3 above, or &lt;a href="https://raw.githubusercontent.com/wilsonfreitas/blog.aboutwilson/master/content/bmf-curve-interpolator.Rmd"&gt;Wilson's&lt;/a&gt; example here. &lt;/p&gt;
&lt;p&gt;2) It took me a second to figure out &lt;a href="https://github.com/getpelican/pelican-plugins/tree/master/rmd_reader#plotting"&gt;&lt;code&gt;pelican.publish=TRUE&lt;/code&gt;&lt;/a&gt;.  If you're writing in RStudio and want to see local output, set that to FALSE.  But if you are ready to run pelican content and publish to the web, that should be TRUE.&lt;/p&gt;
&lt;p&gt;3) Rebecca has some great discussion about figure paths, and how to cajole knitr into putting image assets into the right place.  I may go down that road eventually - folder separation between categories might be nice.  For now, though, I am going with the &lt;a href="https://github.com/almartin82/almart.in-source/tree/master/content"&gt;One Big Folder&lt;/a&gt; strategy, and am throwing a numeric prefix onto the text files so that posts will sort sequentially.  That didn't require any tinkering with &lt;code&gt;fig.path&lt;/code&gt; -- so if you are trying to get up and running, my advice would be to start by writing an .Rmd in &lt;code&gt;content/&lt;/code&gt;, get the publishing workflow nailed down, and then start to re-organize your content - otherwise it could be tricky to distinguish between a problem with rpy2 and a problem with your &lt;code&gt;fig.path&lt;/code&gt;.&lt;/p&gt;
&lt;h1&gt;this was kind of a pain on Windows&lt;/h1&gt;
&lt;p&gt;Yeah.  You'll never believe it.  Some things that came up:&lt;/p&gt;
&lt;p&gt;1) Make sure you have a &lt;a href="http://stackoverflow.com/questions/17573988/r-home-error-with-rpy2"&gt;&lt;code&gt;R_HOME&lt;/code&gt;&lt;/a&gt; environment variable set up, or else your &lt;code&gt;rpy2&lt;/code&gt; install might be pointing at the oldest version of R on your system.  Symptoms that this is happening: you'll get knitr errors when you try to process the .Rmd, because knitr might not be installed.&lt;/p&gt;
&lt;p&gt;2) There was a slight problem with the way &lt;code&gt;rmd_reader&lt;/code&gt; was reading pathnames - \Users was getting interpreted as a Unicode character.  I pushed a &lt;a href="https://github.com/getpelican/pelican-plugins/pull/464"&gt;patch&lt;/a&gt; the plugin library that should address this, if the pull request is accepted.&lt;/p&gt;
&lt;p&gt;3) Graphics drivers were a pain point.  Drivers that were working in RStudio (png, svg) were not working when called via the rpy2 interface.  Not totally sure what the story is here, but I ended up throwing &lt;code&gt;opts_chunk$set(dev='Cairo_svg')&lt;/code&gt; into my rmd_reader block -- take a look at the &lt;a href="https://raw.githubusercontent.com/almartin82/almart.in-source/849d26d53631523b10c18bb77c08135ed0d7d6b1/content/sample-rmd.Rmd"&gt;example&lt;/a&gt; if you want to see it in action.&lt;/p&gt;
&lt;p&gt;Overall, though, I have to say that I'm thrilled about having a straightforward .Rmd publishing tool.  &lt;a href="https://rpubs.com/"&gt;rpubs&lt;/a&gt; is great, but having the ability to publish .Rmds to my own site is exciting.&lt;/p&gt;
&lt;h1&gt;enhancement ideas&lt;/h1&gt;
&lt;p&gt;One thing that would be helpful would be a pelican_rmd template, following the &lt;a href="(http://rmarkdown.rstudio.com/developer_document_templates.html)"&gt;tutorials&lt;/a&gt; for creating custom knitr templates on RStudio.  That would fix the metadata problem, and it could have a nice block with all the &lt;code&gt;hook_content&lt;/code&gt; stuff all ready to go.  If I find some time while this is still fresh, I'd like to add some of this back to Wilson's readme for rmd_reader.  &lt;strong&gt;Shiny&lt;/strong&gt; support is also something to look into.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Andrew Martin</dc:creator><pubDate>Fri, 10 Apr 2015 00:00:00 -0400</pubDate><guid>tag:almart.in,2015-04-10:pelican-with-rmd.html</guid></item><item><title>just a sample rmd</title><link>http://almart.in/sample-rmd.html</link><description>&lt;h2&gt;an out-of-the-box sample RStudio RMD, to test &lt;a href="https://github.com/getpelican/pelican-plugins/tree/master/rmd_reader"&gt;&lt;code&gt;rmd_reader&lt;/code&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;a href="http://rmarkdown.rstudio.com"&gt;http://rmarkdown.rstudio.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;When you click the &lt;strong&gt;Knit&lt;/strong&gt; button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;summary&lt;span class="p"&gt;(&lt;/span&gt;cars&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can also embed plots, for example:&lt;/p&gt;
&lt;p&gt;&lt;img alt="plot of chunk unnamed-chunk-3" src="http://almart.in/figure/unnamed-chunk-3-1.svg" /&gt; &lt;/p&gt;
&lt;p&gt;Note that the &lt;code&gt;echo = FALSE&lt;/code&gt; parameter was added to the code chunk to prevent printing of the R code that generated the plot.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Andrew Martin</dc:creator><pubDate>Fri, 10 Apr 2015 00:00:00 -0400</pubDate><guid>tag:almart.in,2015-04-10:sample-rmd.html</guid></item><item><title>test post</title><link>http://almart.in/will-it-blend.html</link><description>&lt;p&gt;just a test post to see if pelican works...
&lt;img src="https://d2x83fpq8bsx3q.cloudfront.net/wp-content/uploads/2012/11/Tom-on-WIB-Set-Promo-Pics-Small-Jun14-12-21.jpg"&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Andrew Martin</dc:creator><pubDate>Fri, 10 Apr 2015 00:00:00 -0400</pubDate><guid>tag:almart.in,2015-04-10:will-it-blend.html</guid></item></channel></rss>